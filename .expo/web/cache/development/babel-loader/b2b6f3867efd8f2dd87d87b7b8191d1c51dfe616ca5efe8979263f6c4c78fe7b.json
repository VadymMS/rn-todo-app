{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _this = this,\n  _jsxFileName = \"/Users/vadymmykhailichenko/Desktop/vadym/projects/educational-projects/react-native/react-native-demo/src/screens/MainScreen.js\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useState, useEffect, useContext, useCallback } from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport { AddTodo } from \"../components/AddTodo\";\nimport { Todo } from \"../components/Todo\";\nimport { THEME } from \"../theme\";\nimport { TodoContext } from \"../context/todo/todoContext\";\nimport { ScreenContext } from \"../context/screen/screenContext\";\nimport { AppLoader } from \"../components/ui/AppLoader\";\nimport { AppText } from \"../components/ui/AppText\";\nimport { AppButton } from \"../components/ui/AppButton\";\nexport var MainScreen = function MainScreen() {\n  var _useContext = useContext(TodoContext),\n    addTodo = _useContext.addTodo,\n    todos = _useContext.todos,\n    removeTodo = _useContext.removeTodo,\n    fetchTodos = _useContext.fetchTodos,\n    loading = _useContext.loading,\n    error = _useContext.error;\n  var _useContext2 = useContext(ScreenContext),\n    changeScreen = _useContext2.changeScreen;\n  var _useState = useState(Dimensions.get('window').width - THEME.PADDING_HORIZONTAL * 2),\n    _useState2 = _slicedToArray(_useState, 2),\n    deviceWidth = _useState2[0],\n    setDeviceWidth = _useState2[1];\n  var loadTodos = useCallback(function _callee() {\n    return _regeneratorRuntime.async(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(fetchTodos());\n          case 2:\n            return _context.abrupt(\"return\", _context.sent);\n          case 3:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }, [fetchTodos]);\n  useEffect(function () {\n    loadTodos();\n  }, []);\n  useEffect(function () {\n    var update = function update() {\n      var width = Dimensions.get('window').width - THEME.PADDING_HORIZONTAL * 2;\n      setDeviceWidth(width);\n    };\n    Dimensions.addEventListener('change', update);\n    return function () {\n      Dimensions.removeEventListener('change', update);\n    };\n  }, []);\n  if (loading) {\n    return React.createElement(AppLoader, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 16\n      }\n    });\n  }\n  if (error) {\n    return React.createElement(View, {\n      style: styles.center,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 13\n      }\n    }, React.createElement(AppText, {\n      style: styles.error,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 17\n      }\n    }, error), React.createElement(AppButton, {\n      onPress: loadTodos,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 17\n      }\n    }, \"\\u041F\\u043E\\u0432\\u0442\\u043E\\u0440\\u0438\\u0442\\u044C\"));\n  }\n  console.log(todos);\n  var content = React.createElement(View, {\n    style: {\n      width: deviceWidth\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 9\n    }\n  }, React.createElement(FlatList, {\n    keyExtractor: function keyExtractor(item) {\n      return item.id.toString();\n    },\n    data: todos,\n    renderItem: function renderItem(_ref) {\n      var item = _ref.item;\n      return React.createElement(Todo, {\n        todo: item,\n        onRemove: removeTodo,\n        onOpen: changeScreen,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 41\n        }\n      });\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 13\n    }\n  }));\n  if (todos.length === 0) {\n    content = React.createElement(View, {\n      style: styles.imgWrap,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 13\n      }\n    }, React.createElement(Image, {\n      style: styles.image,\n      source: require(\"../../assets/no-items.png\"),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 17\n      }\n    }));\n  }\n  return React.createElement(View, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 9\n    }\n  }, React.createElement(AddTodo, {\n    onSubmit: addTodo,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }\n  }), content);\n};\nvar styles = StyleSheet.create({\n  imgWrap: {\n    alignItems: 'center',\n    justifyContent: 'center',\n    padding: 10,\n    height: 300\n  },\n  image: {\n    width: '100%',\n    height: '100%',\n    resizeMode: 'contain'\n  },\n  center: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  error: {\n    fontSize: 20,\n    color: THEME.DANGER_COLOR\n  }\n});","map":{"version":3,"names":["React","useState","useEffect","useContext","useCallback","StyleSheet","View","FlatList","Image","Dimensions","AddTodo","Todo","THEME","TodoContext","ScreenContext","AppLoader","AppText","AppButton","MainScreen","_useContext","addTodo","todos","removeTodo","fetchTodos","loading","error","_useContext2","changeScreen","_useState","get","width","PADDING_HORIZONTAL","_useState2","_slicedToArray","deviceWidth","setDeviceWidth","loadTodos","_callee","_regeneratorRuntime","async","_callee$","_context","prev","next","awrap","abrupt","sent","stop","Promise","update","addEventListener","removeEventListener","createElement","__self","_this","__source","fileName","_jsxFileName","lineNumber","columnNumber","style","styles","center","onPress","console","log","content","keyExtractor","item","id","toString","data","renderItem","_ref","todo","onRemove","onOpen","length","imgWrap","image","source","require","onSubmit","create","alignItems","justifyContent","padding","height","resizeMode","flex","fontSize","color","DANGER_COLOR"],"sources":["/Users/vadymmykhailichenko/Desktop/vadym/projects/educational-projects/react-native/react-native-demo/src/screens/MainScreen.js"],"sourcesContent":["import React, {useState, useEffect, useContext, useCallback} from 'react';\nimport {StyleSheet, View, FlatList, Image, Dimensions} from 'react-native';\nimport {AddTodo} from '../components/AddTodo';\nimport {Todo} from '../components/Todo';\nimport {THEME} from '../theme';\nimport {TodoContext} from '../context/todo/todoContext';\nimport {ScreenContext} from '../context/screen/screenContext';\nimport {AppLoader} from '../components/ui/AppLoader';\nimport {AppText} from '../components/ui/AppText';\nimport {AppButton} from '../components/ui/AppButton';\n\nexport const MainScreen = () => {\n    const {addTodo, todos, removeTodo, fetchTodos, loading, error} = useContext(TodoContext);\n    const {changeScreen} = useContext(ScreenContext);\n    const [deviceWidth, setDeviceWidth] = useState(Dimensions.get('window').width - THEME.PADDING_HORIZONTAL * 2);\n\n    const loadTodos = useCallback(async () => await fetchTodos(), [fetchTodos]);\n\n    useEffect(() => {\n        loadTodos();\n    }, []);\n\n    useEffect(() => {\n        const update = () => {\n            const width = Dimensions.get('window').width - THEME.PADDING_HORIZONTAL * 2;\n            setDeviceWidth(width);\n        };\n        Dimensions.addEventListener('change', update);\n        return () => {\n            Dimensions.removeEventListener('change', update);\n        };\n    }, []);\n\n    if (loading) {\n        return <AppLoader />;\n    }\n\n    if (error) {\n        return (\n            <View style={styles.center}>\n                <AppText style={styles.error}>{error}</AppText>\n                <AppButton onPress={loadTodos}>Повторить</AppButton>\n            </View>\n        );\n    }\n\n    console.log(todos);\n    let content = (\n        <View style={{width: deviceWidth}}>\n            <FlatList\n                keyExtractor={item => item.id.toString()}\n                data={todos}\n                renderItem={({item}) => <Todo todo={item} onRemove={removeTodo} onOpen={changeScreen} />}\n            />\n        </View>\n    );\n\n    if (todos.length === 0) {\n        content = (\n            <View style={styles.imgWrap}>\n                {/* Для локальных картинок */}\n                <Image style={styles.image} source={require('../../assets/no-items.png')} />\n\n                {/* Для картинок с удленного сервера */}\n                {/* <Image\n                    style={styles.image}\n                    source={{\n                        uri: 'https://upload.wikimedia.org/wikipedia/commons/thumb/a/a7/React-icon.svg/1200px-React-icon.svg.png',\n                    }}\n                /> */}\n            </View>\n        );\n    }\n\n    return (\n        <View>\n            <AddTodo onSubmit={addTodo} />\n\n            {content}\n        </View>\n    );\n};\n\nconst styles = StyleSheet.create({\n    imgWrap: {\n        alignItems: 'center',\n        justifyContent: 'center',\n        padding: 10,\n        height: 300,\n    },\n    image: {\n        width: '100%',\n        height: '100%',\n        resizeMode: 'contain',\n    },\n    center: {\n        flex: 1,\n        justifyContent: 'center',\n        alignItems: 'center',\n    },\n    error: {\n        fontSize: 20,\n        color: THEME.DANGER_COLOR,\n    },\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}